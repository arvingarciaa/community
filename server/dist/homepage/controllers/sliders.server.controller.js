'use strict';Object.defineProperty(exports,'__esModule',{value:!0});var _mongoose=require('mongoose'),_mongoose2=_interopRequireDefault(_mongoose);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var fs=require('fs'),Slider=_mongoose2.default.model('Slider'),sliderControls={getAll:function getAll(a,b){Slider.find(function(c,d){if(c)return c;if(!d.length){Slider.insertMany([{backgroundImage:'/groups/assets/images/community.jpg',caption:{title:'Strong Community',description:'Build an interactive and solid community driven by purpose, and united in achieving common goals.',actionButton:{shouldUse:!1,text:'',sref:''}},order:1},{backgroundImage:'/groups/assets/images/fruits-vegetables-collage.jpg',caption:{title:'Plenty of Groups',description:'Many groups under crops, livestocks, and many more are there to fulfill your interests. You can join in any of them.',actionButton:{shouldUse:!0,text:'See Groups',sref:'groups'}},order:2},{backgroundImage:'/groups/assets/images/engage-people-conversation.jpg',caption:{title:'Limitless Conversations',description:'Engage in learning conversations with other people within your groups. Always try to post something nice and helpful.',actionButton:{shouldUse:!0,text:'Join Now',sref:'register'}},order:3}],function(f,g){b.send({sliders:g})})}else b.send({sliders:d})})},edit:function edit(a,b){var c=a.params.sliderId;Slider.findById(c,function(d,e){var f=e.backgroundImage,g=a.body.backgroundImage;f!==g&&fs.unlink('./uploads/'+f,function(h){return h?void console.error(h):void console.log('Successfully deleted ./uploads/'+f)})}),Slider.findByIdAndUpdate(c,a.body,function(d){d&&console.log(d),b.send('Slider updated')})},delete:function _delete(a,b){var c=a.params.sliderId;Slider.findById(c,function(d,e){var f=e.backgroundImage;fs.unlink('./uploads/'+f,function(g){return g?void console.error(g):void console.log('Successfully deleted ./uploads/'+f)})}),Slider.findByIdAndRemove(c,function(d,e){if(d)return d;return null===e?b.status(404).send('Slider not found!'):void b.send('Slider deleted.')})}};exports.default=sliderControls;
//# sourceMappingURL=sliders.server.controller.js.map