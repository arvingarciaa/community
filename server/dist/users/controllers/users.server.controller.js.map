{"version":3,"sources":["../../../src/users/controllers/users.server.controller.js"],"names":["User","model","userControls","listOne","req","params","userID","findOne","_id","err","res","status","send","user","result","list","find","users","results","listByGroup","groupsJoined","groupHandle","listByGroupAdminstrators","groupAdminsID","split","$in","groupAdminsList","listByGroupPendingMembers","groupPendingMembersID","groupPendingMembersList","updateOne","findOneAndUpdate","$set","body","joinGroup","$addToSet","leaveGroup","$pull"],"mappings":"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","file":"users.server.controller.js","sourcesContent":["import mongoose from 'mongoose';\nconst User = mongoose.model('User');\n\nconst userControls = { \n\tlistOne : (req, res) => {\n\t\tconst userID = req.params.userID;\n\n\t\tUser.findOne({_id: userID}, (err, result) => {\n\t\t\tif (err) { \n\t\t\t\treturn (err);  \n\t\t\t} else if (result === null) {\n\t\t\t\treturn res.status(404).send('User not found!');\n\t\t\t}\n\t\t\t\n\t\t\tres.send({user: result});\n\t\t});\n\t},\n\tlist : (req, res) => {\n\t\tUser.find((err, results) => {\n\t        if (err) { return (err); }\n\n\t        res.send({ users: results });\n\t    });\n\t},\n\tlistByGroup : (req, res) => {\n\t\tUser.find({groupsJoined: req.params.groupHandle}, (err, results) => {\n\t        if (err) { return (err); }\n\n\t        res.send({ users: results });\n\t    });\n\t},\n\tlistByGroupAdminstrators : (req, res) => {\n\t\tconst groupAdminsList = req.params.groupAdminsID.split(',');\n\n\t\tUser.find({_id: {$in: groupAdminsList}}, (err, results) => {\n\t        if (err) { return (err); }\n\n\t        res.send({ users: results });\n\t    });\n\t},\n\tlistByGroupPendingMembers : (req, res) => {\n\t\tconst groupPendingMembersList = req.params.groupPendingMembersID.split(',');\n\n\t\tUser.find({_id: {$in: groupPendingMembersList}}, (err, results) => {\n\t        if (err) { return (err); }\n\n\t        res.send({ users: results });\n\t    });\n\t},\n\tupdateOne : (req, res) => {\n\t\tconst userID = req.params.userID;\n\n\t\tUser.findOneAndUpdate({_id: userID}, { $set: req.body }, (err) => {\n\t\t\tif (err) { return (err); }\n\n\t\t\tres.send(\"User updated.\");\n\t\t});\n\t},\n\tjoinGroup : (req, res) => {\n\t\tconst userID = req.params.userID;\n\t\tconst groupHandle = req.params.groupHandle;\n\n\t\tUser.findOneAndUpdate({_id: userID}, { $addToSet: {groupsJoined: groupHandle}}, (err) => {\n\t\t\tif (err) { return (err); }\n\n\t\t\tres.send(\"User joined a group.\");\n\t\t});\n\t},\n\tleaveGroup : (req, res) => {\n\t\tconst userID = req.params.userID;\n\t\tconst groupHandle = req.params.groupHandle;\n\n\t\tUser.findOneAndUpdate({_id: userID}, { $pull: {groupsJoined: groupHandle}}, (err) => {\n\t\t\tif (err) { return (err); }\n\n\t\t\tres.send(\"User left a group.\");\n\t\t});\n\t}  \n}\n\nexport default userControls;\n"]}