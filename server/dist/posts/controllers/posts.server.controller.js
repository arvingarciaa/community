'use strict';Object.defineProperty(exports,'__esModule',{value:!0});var _postsServer=require('../models/posts.server.model'),_postsServer2=_interopRequireDefault(_postsServer);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var postControls={list:function list(a,b){_postsServer2.default.find(function(c,d){return c?c:void b.send({posts:d})})},listByCategory:function listByCategory(a,b){_postsServer2.default.find({category:a.params.category},function(c,d){return c?c:void b.send({posts:d})})},listByGroupBelonged:function listByGroupBelonged(a,b){var c={groupBelonged:a.params.handle};a.query&&a.query.showPublic&&(c.showPublic=a.query.showPublic),_postsServer2.default.find(c,function(d,e){return d?d:void b.send({posts:e})})},listByGroupBelongedAndCategory:function listByGroupBelongedAndCategory(a,b){var c={groupBelonged:a.params.handle,category:a.params.category};a.query&&a.query.showPublic&&(c.showPublic=a.query.showPublic),_postsServer2.default.find(c,function(d,e){return d?d:void b.send({posts:e})})},listByMyGroups:function listByMyGroups(a,b){var c=a.params.myGroups.split(',');_postsServer2.default.find({groupBelonged:{$in:c}},function(d,e){return d?d:void b.send({posts:e})})},listByMyGroupsAndCategory:function listByMyGroupsAndCategory(a,b){var c=a.params.myGroups.split(',');_postsServer2.default.find({groupBelonged:{$in:c},category:a.params.category},function(d,e){return d?d:void b.send({posts:e})})},listByUser:function listByUser(a,b){_postsServer2.default.find({'postedBy._id':a.params.userID,showPublic:!0},function(c,d){return c?c:void b.send({posts:d})})},listLengthByUser:function listLengthByUser(a,b){_postsServer2.default.find({'postedBy._id':a.params.userID}).count(function(c,d){return c?c:void b.send({postsLength:d})})},listByUserAndCategory:function listByUserAndCategory(a,b){_postsServer2.default.find({'postedBy._id':a.params.userID,category:a.params.category,showPublic:!0},function(c,d){return c?c:void b.send({posts:d})})},listOne:function listOne(a,b){var c=a.params.id;_postsServer2.default.findById(c,function(d,e){if(d)return d;return null===e?b.status(404).send('Post not found!'):void b.send({post:e})})},post:function post(a,b){var c=new _postsServer2.default(a.body);c.save(function(d){return d?d:void b.send('Post saved.')})},updateReactions:function updateReactions(a,b){var c=a.params.id;_postsServer2.default.findByIdAndUpdate(c,{reactions:a.body.reactions},function(d){return d?d:void b.send('Post updated.')})},removeOne:function removeOne(a,b){var c=a.params.id;_postsServer2.default.findByIdAndRemove(c,function(d){return d?d:void b.send('Post deleted.')})}};exports.default=postControls;
//# sourceMappingURL=posts.server.controller.js.map