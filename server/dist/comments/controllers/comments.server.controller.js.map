{"version":3,"sources":["../../../src/comments/controllers/comments.server.controller.js"],"names":["commentControls","list","find","err","console","log","res","send","comments","results","listByReferredPost","req","params","referredPost","listLengthByGroupBelonged","groupBelonged","count","commentsLength","listByUserComments","commentedBy","status","listLengthByOneUser","listOne","id","findById","comment","result","post","body","save","updateReactions","findByIdAndUpdate","reactions","removeOne","findByIdAndRemove","removeByReferredPost","remove"],"mappings":"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","file":"comments.server.controller.js","sourcesContent":["import Comment from '../models/comments.server.model';\n\nconst commentControls = { \n\tlist : (req, res) => {\t// get all comments\n\t\tComment.find((err, results) => {\n\t        if (err) { console.log(err); }\n\n\t        res.send({ comments: results });\n\t    });\n\t}, \n\tlistByReferredPost : (req, res) => {\t// get comments of a post\n\t\tconst referredPost = req.params.referredPost;\n\n\t\tComment.find({referredPost}, (err, results) => {\n\t        if (err) { console.log(err); }\n\n\t        res.send({ comments: results });\n\t    });\n\t},\n\tlistLengthByGroupBelonged : (req, res) => {\t// get no. of comments in a group\n\t\tconst groupBelonged = req.params.groupBelonged;\n\n\t\tComment.find({groupBelonged}).count((err, count) => {\n\t        if (err) { return (err); }\n\n\t        res.send({ commentsLength: count });\n\t    });\n\t},\n\tlistByUserComments : (req, res) => {\t// get comments of a post and a user\n\t\tconst referredPost = req.params.referredPost;\n\t\tconst commentedBy = req.params.commentedBy;\n\n\t\tComment.find({referredPost, 'commentedBy._id': commentedBy}, (err, results) => {\n\t        if (err) { \n\t        \treturn (err); \n\t        } else if (results === null) { \n\t        \treturn res.status(404).send('Comments not found!'); \n\t        }\n\n\t        res.send({ comments: results });\n\t    });\n\t},\n\tlistLengthByOneUser : (req, res) => {\t// get no. of comments of a user\n\t\tconst commentedBy = req.params.commentedBy;\n\n\t\tComment.find({'commentedBy._id': commentedBy}).count((err, count) => {\n\t        if (err) { \n\t        \treturn (err); \n\t        }\n\n\t        res.send({ commentsLength: count });\n\t    });\n\t},\n\tlistOne : (req, res) => {\t// get one comment\n\t\tconst id = req.params.id;\n\n\t\tComment.findById(id, (err, result) => {\n\t\t\tif (err) { \n\t\t\t\treturn (err);  \n\t\t\t} else if (result === null) { \n\t\t\t\treturn res.status(404).send('Comment not found!'); \n\t\t\t}\n\n\t\t\tres.send({comment: result});\n\t\t});\n\t},\n\tpost : (req, res) => {\t// post one comment\n\t\tconst comment = new Comment(req.body);\n\t\tcomment.save((err) => {\n\t\t\tif (err) { console.log(err); }\n\n\t\t\tres.send('Comment saved.');\n\t\t});\n\t},\n\tupdateReactions : (req, res) => {\t// modify comment's reactions\n\t\tconst id = req.params.id;\n\n\t\tComment.findByIdAndUpdate(id, { reactions: req.body.reactions }, (err) => {\n\t\t\tif (err) { console.log(err); };\n\n\t\t\tres.send(\"Comment updated\");\n\t\t});\n\t},\n\tremoveOne : (req, res) => {\t// delete a comment\n\t\tconst id = req.params.id;\n\n\t\tComment.findByIdAndRemove(id, (err, result) => {\n\t\t\tif (err) { \n\t\t\t\treturn (err); \n\t\t\t} else if (result === null) { \n\t\t\t\treturn res.status(404).send('Comment not found!'); \n\t\t\t}\n\n\t\t\tres.send(\"Comment deleted.\");\n\t\t});\n\t},\n\tremoveByReferredPost: (req, res) => {\t// delete all comments of a post\n\t\tconst referredPost = req.params.referredPost;\n\n\t\tComment.remove({referredPost}, (err, result) => {\n\t\t\tif (err) { return (err); }\n\n\t\t\tres.send(\"Comments deleted.\");\n\t\t});\n\t}\n}\n\nexport default commentControls;"]}