{"version":3,"sources":["../../../src/shared/config/shared.server.multer-image-config.js"],"names":["storage","diskStorage","destination","cb","filename","file","originalname","replace","Date","now","split","length","imageFilter","match","Error","imageUpload","limits","fileSize","fileFilter","single"],"mappings":"oEAAA,uE,wEAEA,GAAMA,SAAU,iBAAOC,WAAP,CAAmB,CAC/BC,YAAa,2BAAmB,CAC5BC,EAAG,IAAH,CAAS,YAAT,CACH,CAH8B,CAI/BC,SAAU,wBAAwB,CAC9BD,EAAG,IAAH,CAASE,EAAKC,YAAL,CAAkBC,OAAlB,CAA0B,WAA1B,CAAuC,EAAvC,EAA6C,GAA7C,CAAmDC,KAAKC,GAAL,EAAnD,CAAgE,GAAhE,CAAsEJ,EAAKC,YAAL,CAAkBI,KAAlB,CAAwB,GAAxB,EAA6BL,EAAKC,YAAL,CAAkBI,KAAlB,CAAwB,GAAxB,EAA6BC,MAA7B,CAAqC,CAAlE,CAA/E,CACH,CAN8B,CAAnB,CAAhB,CASMC,YAAc,eAAmB,OAE9BP,GAAKC,YAAL,CAAkBO,KAAlB,CAAwB,uBAAxB,CAF8B,KAKnCV,GAAG,IAAH,IALmC,CAGxBA,EAAG,GAAIW,MAAJ,CAAU,mDAAV,CAAH,IAGd,CAfD,CAiBMC,YAAc,qBAAO,CACtBf,eADsB,CAEtBgB,OAAQ,CAAEC,YAAF,CAFc,CAGtBC,WAAYN,WAHU,CAAP,EAIhBO,MAJgB,CAIT,mBAJS,CAjBpB,C,gBAwBeJ,W","file":"shared.server.multer-image-config.js","sourcesContent":["import multer from 'multer';\n\nconst storage = multer.diskStorage({\n    destination: (req, file, cb) => {\n        cb(null, './uploads/');\n    },\n    filename: function(req, file, cb) {\n        cb(null, file.originalname.replace(/\\.[^/.]+$/, \"\") + '-' + Date.now() + '.' + file.originalname.split('.')[file.originalname.split('.').length -1]);\n    }\n});\n\nconst imageFilter = (req, file, cb) => {\n    // accept image only\n    if (!file.originalname.match(/\\.(jpg|jpeg|png|gif)$/)) {\n        return cb(new Error('Only jpg, jpeg, png, gif image files are allowed!'), false);\n    }\n    cb(null, true);\n};\n\nconst imageUpload = multer({\n    \tstorage,\n    \tlimits: { fileSize: 10000000 },\n    \tfileFilter: imageFilter\n\t}).single('sharedUploadPhoto');\n\n\nexport default imageUpload;"]}